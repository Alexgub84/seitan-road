(this["webpackJsonpseitan-shop"]=this["webpackJsonpseitan-shop"]||[]).push([[0],{146:function(e,t){},210:function(e,t,n){e.exports=n(361)},236:function(e,t,n){e.exports=n.p+"static/media/delivery.4a1173f4.svg"},241:function(e,t){},242:function(e,t){},358:function(e,t,n){e.exports=n.p+"static/media/logo-navbar.0f20537c.png"},359:function(e,t,n){e.exports=n.p+"static/media/cart.a4e67734.svg"},360:function(e,t,n){},361:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(18),c=n.n(s),o=n(29),i=n(4),u=n.n(i),l=n(9),p=n(7),m=n(8),d=n(14),h=n(15),f=n(25),v=n(171),y=n.n(v).a.create({withCredentials:!0}),b=function(e,t){return j(e,"GET",t)},E=function(e,t){return j(e,"POST",t)},g=function(e,t){return j(e,"PUT",t)},O=function(e,t){return j(e,"DELETE",t)};function j(e){return k.apply(this,arguments)}function k(){return(k=Object(l.a)(u.a.mark((function e(t){var n,a,r,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"get",a=s.length>2&&void 0!==s[2]?s[2]:null,e.prev=2,e.next=5,y({url:"".concat("/api").concat(t),method:n,data:a});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(n,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(a)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var D={query:function(e){return w.apply(this,arguments)}};function w(){return(w=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",e.next=3,b("".concat("/item").concat(""),{params:t});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return function(e){D.query().then((function(t){e({type:"SET_PRODUCTS",items:t})}))}}var S={query:function(e){return x.apply(this,arguments)},save:function(e){return N.apply(this,arguments)}};function x(){return(x=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("".concat("/settings"));case 2:return n=e.sent,e.abrupt("return",n[0]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("".concat("/settings"),t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.query();case 2:n=e.sent,t({type:"SET_SETTINGS",settings:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var R=n(31),A=n(10);var P={login:function(e){return _.apply(this,arguments)},logout:function(){return q.apply(this,arguments)}};function _(){return(_=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("/auth/login",t);case 2:return n=e.sent,e.abrupt("return",I(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("/auth/logout");case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return sessionStorage.setItem("user",JSON.stringify(e)),e}function U(){return function(e){return e({type:"EMPTY_CART"})}}function M(){return function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.logout();case 2:t({type:"SET_USER",user:null});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function G(e){var t=e.measure,n=e.quantity;return r.a.createElement("div",{className:"amount"},0===n?"unit"===t?"\u05d9\u05d7\u05d9\u05d3\u05d5\u05ea":"\u05de\u05e9\u05e7\u05dc":"unit"===t?"".concat(n," \u05d9\u05d7' "):"".concat(100*n," \u05d2'"))}function L(e){var t=e.onAdd,n=e.onReduce,a=e.measure,s=e.quantity;return r.a.createElement("div",{className:"amount-container flex"},r.a.createElement("div",{className:"plus-btn amount-btn",onClick:t},r.a.createElement("div",{className:"symbol"},"+")),r.a.createElement(G,{measure:a,quantity:s}),r.a.createElement("div",{className:"minus-btn amount-btn",onClick:n},r.a.createElement("div",{className:"symbol"},"-")))}function B(e){var t=e.onAddToCart;return r.a.createElement("div",{className:"add-to-cart-btn",onClick:t},"\u05d4\u05d5\u05e1\u05e4\u05d4 \u05dc\u05e1\u05dc")}function V(e){var t=e.souses,n=e.sousePrice,a=e.onSouseClicked;return r.a.createElement("div",{className:"select-box"},t.map((function(e,t){return r.a.createElement("div",{className:"select-box-item",key:t,value:e,onClick:function(t){return a(t,e)}},e," ",0!==t&&"".concat(n,"+"))})))}var F=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isDropDownShown:!1},e.onToggleDropDown=function(t){t.stopPropagation(),t.preventDefault(),e.setState({isDropDownShown:!e.state.isDropDownShown})},e.onSouseClicked=function(t,n){e.onToggleDropDown(t),e.props.onSouseChange(n)},e}return Object(m.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.souses,a=t.sousePrice,s=t.chosenSouse;t.onSouseChange;return r.a.createElement("div",{className:"marinada-select-container flex"},r.a.createElement("div",{className:"marinada-select-btn",onClick:function(t){return e.onToggleDropDown(t)}},r.a.createElement("div",{className:"symbol"},"V")),r.a.createElement("div",{className:"marinada-select-selected"},s||"\u05de\u05e8\u05d9\u05e0\u05d3\u05d4"),this.state.isDropDownShown&&r.a.createElement(V,{chosenSouse:s,souses:n,sousePrice:a,onSouseClicked:this.onSouseClicked}))}}]),n}(r.a.Component),Y=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={quantity:0,cart:[],souse:null},e.onAdd=function(t){e.stopAndPrevent(t),e.setState({quantity:e.state.quantity+1})},e.onReduce=function(t){e.stopAndPrevent(t),0!==e.state.quantity&&e.setState({quantity:e.state.quantity-1})},e.onSouseChange=function(t){e.setState({souse:t})},e.onAddToCart=function(t){if(e.stopAndPrevent(t),0!==e.state.quantity){e.setState({quantity:0}),e.props.item.souses&&e.setState({souse:"\u05dc\u05dc\u05d0 \u05de\u05e8\u05d9\u05e0\u05d3\u05d4"});var n=Object(A.a)(Object(A.a)({},e.props.item),{},{quantity:e.state.quantity,souse:e.state.souse});e.props.addToCart(n),e.props.history.push("/shop")}},e.stopAndPrevent=function(e){e.stopPropagation(),e.preventDefault()},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.item.souses&&this.setState({souse:"\u05dc\u05dc\u05d0 \u05de\u05e8\u05d9\u05e0\u05d3\u05d4"})}},{key:"render",value:function(){var e=this.props.item;return r.a.createElement("div",{className:"add-to-cart-container flex"},r.a.createElement("section",{className:"add-to-cart-otpions flex justify-evenly "},r.a.createElement(L,{onAdd:this.onAdd,onReduce:this.onReduce,measure:this.props.item.measure,quantity:this.state.quantity}),e.souses&&r.a.createElement(F,{chosenSouse:this.state.souse,souses:e.souses,sousePrice:e.sousePrice,onSouseChange:this.onSouseChange})),r.a.createElement(B,{onAddToCart:this.onAddToCart}))}}]),n}(a.Component),Q={addToCart:function(e){return function(t,n){t(n().userReducer.cart.find((function(t){return e.name===t.name&&(!e.souse||t.souse===e.souse)}))?{type:"UPDATE_QUANTITY",item:e}:{type:"ADD_TO_CART",item:e})}}},H=Object(o.f)(Object(f.b)((function(e){return{cart:e.userReducer.cart}}),Q)(Y));function J(e){var t=e.item;return r.a.createElement(R.b,{to:"/details/".concat(t._id),style:{textDecoration:"none"}},r.a.createElement("div",{className:"item-card flex "},r.a.createElement("img",{src:t.imgUrl,alt:"seitan-img"}),r.a.createElement("section",{className:"item-info "},r.a.createElement("h2",null,t.name),r.a.createElement("h3",null,t.miniDescription)),r.a.createElement("h3",null,"\u20aa",t.price),r.a.createElement("h4",null,t.size),r.a.createElement(H,{item:t})))}function W(e){var t=e.items;return r.a.createElement("div",{className:"items-list flex"},t.map((function(e){return r.a.createElement(J,{item:e,key:e._id})})))}var X=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={innerStyle:{width:"".concat(e.props.total/e.props.min*100,"%")},txt:" \u05e2\u05d5\u05d3 ".concat(e.props.min-e.props.total," \u05d5\u05d4\u05de\u05e9\u05dc\u05d5\u05d7 \u05e2\u05dc\u05d9\u05e0\u05d5!  ")},e}return Object(m.a)(a,[{key:"componentDidUpdate",value:function(e){if(this.props!==e){var t={},n=this.props.total/this.props.min*100;this.setState({txt:" \u05e2\u05d5\u05d3 ".concat(this.props.min-this.props.total," \u05d5\u05d4\u05de\u05e9\u05dc\u05d5\u05d7 \u05e2\u05dc\u05d9\u05e0\u05d5!  ")}),n>=100&&(this.setState({txt:"\u05de\u05e9\u05dc\u05d5\u05d7 \u05d7\u05d9\u05e0\u05dd!"}),t.backgroundColor="green"),t.width="".concat(n,"%"),this.setState({innerStyle:t})}}},{key:"render",value:function(){return r.a.createElement("div",{className:"free-shipment-container flex align-center justify-around"},r.a.createElement("div",{className:"free-shipment-txt1"}," ",this.state.txt),r.a.createElement("div",{className:"free-shipment-bar "},r.a.createElement("div",{className:"inner-container",style:this.state.innerStyle},r.a.createElement("img",{src:n(236),alt:"delivery"}))),r.a.createElement("div",{className:"free-shipment-txt2"},"\u05e1\u05db\u05d5\u05dd \u05d4\u05de\u05e9\u05dc\u05d5\u05d7 \u05d9\u05e7\u05d1\u05e2 \u05e1\u05d5\u05e4\u05d9\u05ea \u05dc\u05d0\u05d7\u05e8 \u05d1\u05d7\u05d9\u05e8\u05ea \u05e9\u05d9\u05d8\u05ea \u05d4\u05de\u05e9\u05dc\u05d5\u05d7"))}}]),a}(a.Component),K=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={total:0},e.onUpdateQuantity=function(t,n){-1===n&1===t.quantity||(t.quantity+=n,e.props.updateQuantity({item:t}))},e.getTotalPriceForItem=function(e){var t=e.quantity*(e.price+(e.souse&&"\u05dc\u05dc\u05d0 \u05de\u05e8\u05d9\u05e0\u05d3\u05d4"!==e.souse?e.sousePrice:0));return"".concat(t,'\u05e9"\u05d7')},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.setState({path:this.props.match.path})}},{key:"render",value:function(){var e,t=this;return 0===this.props.cart.length?r.a.createElement("div",{className:"cart"},r.a.createElement("h2",null,"\u05d4\u05e2\u05d2\u05dc\u05d4 \u05e8\u05d9\u05e7\u05d4")):(e="/checkout"===this.state.path?r.a.createElement("button",{onClick:this.props.onNextClick},"\u05d1\u05d7\u05e8 \u05db\u05ea\u05d5\u05d1\u05ea"):r.a.createElement(R.c,{to:"/checkout"},r.a.createElement("button",null,"\u05d4\u05e9\u05dc\u05dd \u05d0\u05ea \u05d4\u05d4\u05d6\u05de\u05e0\u05d4")),r.a.createElement("div",{className:"cart"},r.a.createElement(X,{min:this.props.settings.freeDeliveryPrice,total:this.props.total}),r.a.createElement("ul",null,this.props.cart.map((function(e,n){return r.a.createElement("li",{key:n,className:"flex justify-between"},r.a.createElement("span",null,e.name),r.a.createElement("span",null,"".concat(e.price,'\u05e9"\u05d7')),e.souse&&r.a.createElement("span",null," ",e.souse),r.a.createElement("section",{className:"flex"},r.a.createElement("button",{onClick:function(){return t.onUpdateQuantity(e,1)}},"+"),r.a.createElement(G,{measure:e.measure,quantity:e.quantity}),r.a.createElement("button",{onClick:function(){return t.onUpdateQuantity(e,-1)}},"-")),r.a.createElement("span",null,t.getTotalPriceForItem(e)),r.a.createElement("button",{onClick:function(){return t.props.deleteItem(e)}},"X"))}))),r.a.createElement("section",null," \u05e1\u05d9\u05db\u05d5\u05dd: ",this.props.total),r.a.createElement("button",{onClick:this.props.emptyCart},"\u05e8\u05d5\u05e7\u05df "),e))}}]),n}(a.Component),z={updateQuantity:function(e){return function(t){return t({type:"UPDATE_QUANTITY",item:e})}},deleteItem:function(e){return function(t,n){t({type:"DELETE_ITEM",idx:n().userReducer.cart.findIndex((function(t){return e.name===t.name&&(!e.souse||t.souse===e.souse)}))})}},emptyCart:U},$=Object(o.f)(Object(f.b)((function(e){return{cart:e.userReducer.cart,total:e.userReducer.total,settings:e.settingsReducer.settings}}),z)(K)),Z=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadItems();case 2:return e.next=4,this.props.loadSettings();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.items;return e?r.a.createElement("div",{className:"main-container"},r.a.createElement("div",{className:"shop flex"},r.a.createElement(W,{items:e}),r.a.createElement($,null))):r.a.createElement("h1",null,"Loading...")}}]),n}(a.Component),ee={loadItems:C,loadSettings:T},te=Object(o.f)(Object(f.b)((function(e){return{items:e.itemReducer.items,loggedInUser:e.userReducer.loggedInUser}}),ee)(Z)),ne=n(21),ae={query:function(){return re.apply(this,arguments)},getById:function(e){return se.apply(this,arguments)},save:function(e){return ce.apply(this,arguments)},remove:function(e){return oe.apply(this,arguments)}};function re(){return(re=Object(l.a)(u.a.mark((function e(){var t,n,a,r,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},n=s.length>1?s[1]:void 0,!t){e.next=8;break}return a=t?"?".concat(n,"=").concat(t):"",e.next=6,b("".concat("/order").concat(a),{params:t});case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(){return(se=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("".concat("/order","/").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){return(ce=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.createdAt=new Date(Date.now()).toLocaleString(),e.next=3,E("".concat("/order"),t);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){return(oe=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("".concat("/order","/").concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie=n(172),ue=n(78);function le(e){var t=e.orders,n=e.removeOrder,a=[{field:"idx",headerName:"#",width:70},{field:"firstName",headerName:"First Name",width:130},{field:"lastName",headerName:"Last name",width:130},{field:"itemsCount",headerName:"Items ",width:100},{field:"supplyCity",headerName:"Supply city",width:200},{field:"supplyType",headerName:"Supply type",width:200},{field:"supplyDate",headerName:"Supply date",width:200},{field:"",headerName:"Action",sortable:!1,disableClickEventBubbling:!0,renderCell:function(e){return r.a.createElement(ue.a,{color:"secondary",variant:"contained",onClick:function(){window.confirm("Are you sure you want to delete this item?")&&n(e.row.id)}},"Delete")}}],s=t.map((function(e,t){return{id:e._id,idx:t+1,firstName:e.customerDetails.firstName,lastName:e.customerDetails.lastName,itemsCount:e.items.length,supplyType:e.supply.type,supplyDate:c(e.supply.supplyDate),supplyCity:e.supply.name}}));function c(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),r=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),"".concat(a,"-").concat(n,"-").concat(r)}return r.a.createElement("div",{className:"orders-table",style:{height:400,width:"100%"}},r.a.createElement(ie.a,{rows:s,columns:a}))}var pe=n(177),me=n(105);function de(e){var t=e.orders,n=e.items,a=e.fileName,s=t.map((function(e,t){var a={"#":t+1,"First Name":e.customerDetails.firstName,"Last Name":e.customerDetails.lastName,Email:e.customerDetails.email,Phone:e.customerDetails.phone,Town:e.customerDetails.town,Street:e.customerDetails.street,"Supply type":e.supply.type,"Supply details":e.supply.name,Total:e.totalPayment};return console.log("items:",n),e.items.map(function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a["".concat(t.name).concat(t.souse?"+"+t.souse:"")]=t.quantity;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a}));var c=function(){var e={Sheets:{Delivery:me.utils.json_to_sheet(s),Kitchen:me.utils.json_to_sheet(function(){for(var e=[],a=[],r=n.findIndex((function(e){return"souses"in e})),s=0;s<n[r].souses.length;s++){var c=n[r].souses[s];a.push(c)}for(var o=[],i=0;i<t.length;i++){t[i].items.forEach((function(e){"gram"===e.measure&&o.push(e.quantity)}))}o.sort((function(e,t){return e-t}));for(var u=function(r){var s=n[r],c={};c.Product=s.name,c["Total Grams"]=0,c["Total Units"]=0,a.forEach((function(e){c[e]=0})),o.forEach((function(e){c["".concat(100*e," grams")]=0})),t.forEach((function(e){e.items.forEach((function(e){if(e.name===s.name)switch(e.measure){case"gram":c["Total Grams"]+=100*e.quantity,o.forEach((function(t){c["".concat(100*t," grams")]+=e.quantity===t?e.quantity:0}));break;case"unit":c["Total Units"]+=e.quantity,a.forEach((function(t){c[t]+=e.souse===t?e.quantity:0}))}}))})),e.push(c)},l=0;l<n.length;l++)u(l);for(var p=0;p<e.length;p++){var m=e[p];for(var d in m)0==m[d]&&(m[d]=null)}return console.log(e),e}())},SheetNames:["Delivery","Kitchen"]},r=me.write(e,{bookType:"xlsx",type:"array"}),c=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});pe.saveAs(c,a+".xlsx")};return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return c()}},"Export"))}var he=n(128),fe=n(192),ve=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={date:null,readOnly:{freeDeliveryPrice:!0,supplyDate:!0,maxGrams:!0},settings:{},filterBy:{}},e.toggleEdit=function(t,n){t.preventDefault(),e.setState((function(t){return Object(A.a)(Object(A.a)({},t),{},{readOnly:Object(A.a)(Object(A.a)({},t.readOnly),{},Object(ne.a)({},n,!e.state.readOnly[n]))})}))},e.handleChange=function(){var t=Object(l.a)(u.a.mark((function t(n){var a,r,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.target,r=a.name,s="number"===a.type?+a.value:"date"===a.type?new Date(a.value).getTime():a.value,t.next=5,e.setState((function(e){return Object(A.a)(Object(A.a)({},e),{},{settings:Object(A.a)(Object(A.a)({},e.settings),{},Object(ne.a)({},r,s))})}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadSettings(this.state.filterBy);case 2:return this.setState({settings:this.props.settings},(function(){t.setState({date:t._formatDate(t.state.settings.supplyDate)})})),e.next=5,this.props.loadOrders();case 5:return e.next=7,this.props.loadItems();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onUpdateSettings",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.props.saveSettings(this.state.settings);case 3:Object.keys(this.state.readOnly).forEach((function(e){n.setState({readOnly:Object(A.a)(Object(A.a)({},n.state.readOnly),{},Object(ne.a)({},e,!0))})}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_formatDate",value:function(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),r=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),"".concat(r,"-").concat(n,"-").concat(a)}},{key:"render",value:function(){var e=this,t=this.props,n=t.orders,a=t.items;return console.log(a),window.orders=n,window.items=a,this.props.loggedInUser?a[8]&&a[8].description[0]?r.a.createElement("div",{className:"main-container"},r.a.createElement("form",{className:"control-form"},r.a.createElement("section",null,r.a.createElement(he.a,{htmlFor:"freeDeliveryPrice"},"\u05de\u05d7\u05d9\u05e8 \u05de\u05d9\u05e0\u05d9\u05de\u05dc\u05d9 \u05dc\u05de\u05e9\u05dc\u05d5\u05d7 \u05d7\u05d9\u05e0\u05dd"),r.a.createElement(fe.a,{type:"number",name:"freeDeliveryPrice",id:"freeDeliveryPrice",onChange:function(t){return e.handleChange(t)},value:this.state.settings.freeDeliveryPrice,disabled:this.state.readOnly.freeDeliveryPrice}),r.a.createElement("button",{onClick:function(t){return e.toggleEdit(t,"freeDeliveryPrice")}},"\u05e2\u05e8\u05d5\u05da")),r.a.createElement("section",null,r.a.createElement(he.a,{htmlFor:"supplyDate"},"\u05de\u05d5\u05e2\u05d3 \u05de\u05e9\u05dc\u05d5\u05d7 \u05d4\u05d1\u05d0"),this.state.date&&r.a.createElement(fe.a,{id:"supplyDate",name:"supplyDate",label:"Birthday",type:"date",format:"dd/MM/yyyy",defaultValue:this.state.date,disabled:this.state.readOnly.supplyDate,onChange:function(t){return e.handleChange(t)},InputLabelProps:{shrink:!0}}),r.a.createElement("button",{onClick:function(t){return e.toggleEdit(t,"supplyDate")}},"\u05e2\u05e8\u05d5\u05da")),r.a.createElement("section",null,r.a.createElement(he.a,{htmlFor:"maxGrams"},"\u05de\u05e7\u05e1\u05d9\u05de\u05d5\u05dd \u05d2\u05e8\u05de\u05d9\u05dd \u05dc\u05d4\u05d6\u05de\u05e0\u05d4"),r.a.createElement(fe.a,{type:"number",name:"maxGrams",id:"maxGrams",onChange:function(t){return e.handleChange(t)},value:this.state.settings.maxGrams,disabled:this.state.readOnly.maxGrams}),r.a.createElement("button",{onClick:function(t){return e.toggleEdit(t,"maxGrams")}},"\u05e2\u05e8\u05d5\u05da")),r.a.createElement("button",{onClick:function(t){return e.onUpdateSettings(t)}}," ","\u05e9\u05de\u05d5\u05e8 \u05e9\u05d9\u05e0\u05d5\u05d9\u05d9\u05dd")),r.a.createElement(de,{items:a,orders:n,fileName:"Report for 10/2"}),0!==n.length&&r.a.createElement(le,{orders:n,removeOrder:this.props.removeOrder})):r.a.createElement("div",null,"Loading..."):r.a.createElement("div",null)}}]),n}(a.Component),ye={loadSettings:T,saveSettings:function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Actions:",e),t.next=3,S.save(e);case 3:a=t.sent,n({type:"SET_SETTINGS",settingsToSave:a});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},loadOrders:function(e,t){return function(){var n=Object(l.a)(u.a.mark((function n(a){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ae.query(e,t);case 2:r=n.sent,a({type:"LOAD_ORDERS",orders:r});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},removeOrder:function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ae.remove(e);case 2:n({type:"REMOVE_ORDER",orderId:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},loadItems:C},be=Object(f.b)((function(e){return{settings:e.settingsReducer.settings,loggedInUser:e.userReducer.loggedInUser,orders:e.orderReducer.orders,items:e.itemReducer.items}}),ye)(ve);function Ee(){return r.a.createElement("div",{className:"home-container main-container"},r.a.createElement("div",{className:"hero"}," HERO"),r.a.createElement(R.c,{to:"/shop"},r.a.createElement("button",null,"\u05dc\u05de\u05d5\u05e6\u05e8\u05d9\u05dd")))}var ge=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={msg:"",loginCred:{userName:"",password:""}},e.loginHandleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState((function(e){return{loginCred:Object(A.a)(Object(A.a)({},e.loginCred),{},Object(ne.a)({},a,r))}}))},e.doLogin=function(){var t=Object(l.a)(u.a.mark((function t(n){var a,r,s,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),console.log("Login:",e.state.loginCred),a=e.state.loginCred,r=a.userName,s=a.password,r&&s){t.next=5;break}return t.abrupt("return",e.setState({msg:"\u05d0\u05e0\u05d0 \u05d4\u05db\u05e0\u05d9\u05e1\u05d5 \u05e9\u05dd \u05de\u05e9\u05ea\u05de\u05e9 \u05d5\u05e1\u05d9\u05e1\u05de\u05d0"}));case 5:return c={userName:r,password:s},t.next=8,e.props.login(c);case 8:console.log("after login:",e.props.loggedInUser),e.props.loggedInUser&&e.props.history.push("/control"),e.setState({loginCred:{userName:"",password:""}});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(m.a)(n,[{key:"render",value:function(){var e,t,n=r.a.createElement("form",{className:"login-form"},r.a.createElement(fe.a,{autoFocus:!0,required:!0,type:"text",name:"userName",value:this.state.loginCred.userName,onChange:this.loginHandleChange,placeholder:"User Name"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(fe.a,{required:!0,type:"password",name:"password",value:this.state.loginCred.password,onChange:this.loginHandleChange,placeholder:"Password"}),r.a.createElement("br",null),r.a.createElement(ue.a,(e={variant:"text"},Object(ne.a)(e,"variant","outlined"),Object(ne.a)(e,"color","primary"),Object(ne.a)(e,"onClick",this.doLogin),e),"Login")),a=this.props.loggedInUser;return r.a.createElement("div",{className:"login main-container"},r.a.createElement("h2",null,this.state.msg),a&&r.a.createElement("div",null,r.a.createElement("h2",null,"Welcome: ",a.userName),r.a.createElement(ue.a,(t={variant:"text"},Object(ne.a)(t,"variant","outlined"),Object(ne.a)(t,"color","primary"),Object(ne.a)(t,"onClick",this.props.logout),t),"Logout")),!a&&n)}}]),n}(a.Component),Oe={login:function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.login(e);case 2:a=t.sent,n({type:"SET_USER",user:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},logout:M},je=Object(f.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser}}),Oe)(ge),ke=n(178),De=n.n(ke),we=n(103),Ce=n(182),Se=n(58),xe=n(46),Ne=n(73),Te=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={selectedOption:null},e.handleChange=function(t){e.setState({selectedOption:t}),e.props.saveSupplyMethod({type:"delivery",name:t.value.name,supplyDate:e.props.supplyDate,price:t.value.price})},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.chosenDelivery&&"delivery"===this.props.chosenDelivery.type&&this.setState({selectedOption:{value:{name:this.props.chosenDelivery.name,price:this.props.chosenDelivery.price},label:"".concat(this.props.chosenDelivery.name," (").concat(this.props.chosenDelivery.price,'\u05e9"\u05d7) ')}})}},{key:"render",value:function(){var e=this.props.delivery.map((function(e){return{value:e,label:"".concat(e.name," (").concat(e.price,'\u05e9"\u05d7) ')}}));return r.a.createElement("div",null,r.a.createElement(Ne.a,{value:this.state.selectedOption,onChange:this.handleChange,options:e}),this.state.selectedOption&&this.state.selectedOption.value.citiesList&&r.a.createElement("div",null,'\u05d4\u05d9\u05e9\u05d5\u05d1\u05d9\u05dd \u05d1\u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4 \u05d4\u05e0"\u05dc:',this.state.selectedOption.value.citiesList.map((function(e,t){return r.a.createElement("span",null,0===t?"".concat(e,", "):e)}))))}}]),n}(a.Component),Re=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={selectedOption:null},e.handleChange=function(t){e.setState({selectedOption:t}),e.props.saveSupplyMethod({type:"pickup",name:t.value,supplyDate:e.props.supplyDate,price:0})},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.chosenPickup&&"pickup"===this.props.chosenPickup.type&&this.setState({selectedOption:{value:{name:this.props.chosenPickup.name},label:this.props.chosenPickup.name}})}},{key:"render",value:function(){var e=this.props.pickup.map((function(e){return{value:e,label:e}}));return r.a.createElement("div",null,r.a.createElement(Ne.a,{value:this.state.selectedOption,onChange:this.handleChange,options:e}))}}]),n}(a.Component),Ae=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={selectedOption:null},e.handleChange=function(t){e.setState({selectedOption:t}),e.props.saveSupplyMethod({type:"specialGroup",name:t.value.name,supplyDate:t.value.supplyDate,price:0})},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.chosenSpecialGroup&&"specialGroup"===this.props.chosenSpecialGroup.type&&this.setState({selectedOption:{value:{name:this.props.chosenSpecialGroup.name,supplyDate:this.props.chosenSpecialGroup.supplyDate},label:this.props.chosenSpecialGroup.name}})}},{key:"render",value:function(){var e=this.props.specialGroup.map((function(e){return{value:e,label:e.name}}));return r.a.createElement("div",null,r.a.createElement(Ne.a,{value:this.state.selectedOption,onChange:this.handleChange,options:e}))}}]),n}(a.Component);function Pe(e){var t=e.supplyDate,n=["\u05d9\u05e0\u05d5\u05d0\u05e8","\u05e4\u05d1\u05e8\u05d5\u05d0\u05e8","\u05de\u05e8\u05e5","\u05d0\u05e4\u05e8\u05d9\u05dc","\u05de\u05d0\u05d9","\u05d9\u05d5\u05e0\u05d9","\u05d9\u05d5\u05dc\u05d9","\u05d0\u05d5\u05d2\u05d5\u05e1\u05d8","\u05e1\u05e4\u05d8\u05de\u05d1\u05e8","\u05d0\u05d5\u05e7\u05d8\u05d5\u05d1\u05e8","\u05e0\u05d5\u05d1\u05de\u05d1\u05e8","\u05d3\u05e6\u05de\u05d1\u05e8"];return r.a.createElement("div",null,r.a.createElement("div",null,"\u05d4\u05d4\u05d6\u05de\u05e0\u05d4 \u05ea\u05d4\u05d9\u05d4 \u05de\u05d5\u05db\u05e0\u05d4 \u05d1:"),r.a.createElement("div",null,function(){var e=new Date(t),a=e.getDay(),r=n[e.getMonth()];return"".concat(a," \u05d1").concat(r)}()))}var _e=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={optionsCmp:null,btnClicked:null,supply:null},e.onButtonClicked=function(t){var n=e.props.settings,a=n.delivery,s=n.pickup,c=n.specialGroup,o=r.a.createElement(Te,{delivery:a,supplyDate:e.props.settings.supplyDate,saveSupplyMethod:e.props.saveSupplyMethod,chosenDelivery:e.props.supply}),i=r.a.createElement(Re,{pickup:s,supplyDate:e.props.settings.supplyDate,saveSupplyMethod:e.props.saveSupplyMethod,chosenPickup:e.props.supply}),u=r.a.createElement(Ae,{specialGroup:c,saveSupplyMethod:e.props.saveSupplyMethod,chosenSpecialGroup:e.props.supply});switch(t){case"delivery":e.setState({optionsCmp:o});break;case"pickup":e.setState({optionsCmp:i});break;case"specialGroup":e.setState({optionsCmp:u})}e.setState({activeCmp:t,btnClicked:t})},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({supply:this.props.supply});case 2:if(this.state.supply){e.next=4;break}return e.abrupt("return");case 4:this.onButtonClicked(this.state.supply.type);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t="delivery-choice-btn";return r.a.createElement("div",{className:"delivery-container"},r.a.createElement("section",{className:"delivery-btns"},r.a.createElement("div",{className:"".concat(t)+"".concat("delivery"===this.state.btnClicked?" clicked":""),onClick:function(){return e.onButtonClicked("delivery")}},"\u05de\u05e9\u05dc\u05d5\u05d7"),r.a.createElement("div",{className:"".concat(t)+"".concat("pickup"===this.state.btnClicked?" clicked":""),onClick:function(){return e.onButtonClicked("pickup")}},"\u05d0\u05d9\u05e1\u05d5\u05e3 \u05e2\u05e6\u05de\u05d9"),r.a.createElement("div",{className:"".concat(t)+"".concat("specialGroup"===this.state.btnClicked?" clicked":""),onClick:function(){return e.onButtonClicked("specialGroup")}},"\u05e7\u05d1\u05d5\u05e6\u05ea \u05e8\u05db\u05d9\u05e9\u05d4")),this.state.optionsCmp,this.props.supply&&r.a.createElement(Pe,{supplyDate:this.props.supply.supplyDate}))}}]),n}(a.Component),qe={saveSupplyMethod:function(e){return function(t){return t({type:"SAVE_SUPPLY\u05b9\u05b9\u05b9_METHOD",supply:e})}}},Ie=Object(f.b)((function(e){return{settings:e.settingsReducer.settings,customerDetails:e.userReducer.customerDetails,supply:e.userReducer.supply}}),qe)(_e),Ue=Object(xe.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(2),width:200}}}})),Me=Se.a().shape({firstName:Se.b().required(),lastName:Se.b().required(),phone:Se.b().required().min(9),email:Se.b().required(),town:Se.b().required(),street:Se.b().required()});function Ge(e){var t=e.onSaveDetails,n=e.customerDetails,a=Ue(),s=Object(we.b)({resolver:Object(Ce.yupResolver)(Me)}),c=s.register,o=s.handleSubmit,i=s.errors,u=function(e){console.log("errors:",i),console.log(e),t(e)};return r.a.createElement("div",{className:"main-container"},r.a.createElement("div",{className:"details-container"},r.a.createElement("form",{className:a.root,onSubmit:o(u)},r.a.createElement("section",null,r.a.createElement(fe.a,{floatingLabelText:"\u05e9\u05dd",type:"text",id:"name",name:"firstName",label:"\u05e9\u05dd \u05e4\u05e8\u05d8\u05d9",variant:"outlined",defaultValue:n.firstName,inputRef:c})),r.a.createElement("section",null,r.a.createElement(fe.a,{type:"text",id:"lastname",name:"lastName",label:"\u05e9\u05dd \u05de\u05e9\u05e4\u05d7\u05d4",variant:"outlined",color:"secondary",defaultValue:n.lastName,inputRef:c})),r.a.createElement("section",null,r.a.createElement(fe.a,{type:"tel",id:"phone",name:"phone",label:"\u05de\u05e1' \u05d8\u05dc\u05e4\u05d5\u05df ",variant:"outlined",color:"secondary",defaultValue:n.phone,inputRef:c})),r.a.createElement("section",null,r.a.createElement(fe.a,{type:"email",id:"email",name:"email",label:"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc ",variant:"outlined",color:"secondary",defaultValue:n.email,inputRef:c})),r.a.createElement("section",null,r.a.createElement(fe.a,{type:"text",id:"town",name:"town",label:"\u05e2\u05d9\u05e8",variant:"outlined",color:"secondary",defaultValue:n.town,inputRef:c})),r.a.createElement("section",null,r.a.createElement(fe.a,{type:"text",id:"street",name:"street",label:"\u05e8\u05d7\u05d5\u05d1, \u05d1\u05e0\u05d9\u05d9\u05df, \u05d3\u05d9\u05e8\u05d4",variant:"outlined",color:"secondary",defaultValue:n.street,inputRef:c}))),r.a.createElement(Ie,null)),r.a.createElement("button",{className:"btn",onClick:o(u)},"\u05d4\u05de\u05e9\u05da \u05dc\u05ea\u05e9\u05dc\u05d5\u05dd"))}function Le(e){var t=e.onNextClick,n=e.total,a=e.supply;return r.a.createElement("div",{className:"payment main-container"},r.a.createElement("section",null,r.a.createElement("div",null,r.a.createElement("span",null,"\u05de\u05d5\u05e6\u05e8\u05d9\u05dd:"),r.a.createElement("span",null,n)),r.a.createElement("div",null,r.a.createElement("span",null,"\u05de\u05e9\u05dc\u05d5\u05d7:"),r.a.createElement("span",null,a.price)),r.a.createElement("div",null,r.a.createElement("span",null,"\u05e1\u05d9\u05db\u05d5\u05dd:"),r.a.createElement("span",null,n+a.price))),r.a.createElement("h2",null,"\u05e0\u05d9\u05ea\u05df \u05dc\u05e9\u05dc\u05dd \u05d1\u05d3\u05e8\u05db\u05d9\u05dd \u05d4\u05d1\u05d0\u05d5\u05ea:"),r.a.createElement("section",{className:"payment-options"},r.a.createElement("div",null,r.a.createElement("h2",null,"\u05d0\u05e4\u05dc\u05d9\u05e7\u05e6\u05d9\u05d9\u05ea Bit \u05d0\u05d5 Paybox"),r.a.createElement("pre",null,"\u05e0\u05d0 \u05dc\u05d4\u05e2\u05d1\u05d9\u05e8 \u05d0\u05ea \u05d4\u05ea\u05e9\u05dc\u05d5\u05dd \u05dc\u05d0\u05d9\u05d4 \u05dc\u05de\u05e1\u05e4\u05e8 054-369-0088")),r.a.createElement("div",null,r.a.createElement("h2",null,"\u05de\u05d6\u05d5\u05de\u05df"),r.a.createElement("pre",null,"\u05dc\u05d0 \u05dc\u05d4\u05e2\u05d1\u05d9\u05e8 \u05d0\u05ea \u05d4\u05ea\u05e9\u05dc\u05d5\u05dd \u05d1\u05de\u05d6\u05d5\u05de\u05df \u05d1\u05e2\u05ea \u05e7\u05d1\u05dc\u05ea \u05d4\u05de\u05e9\u05dc\u05d5\u05d7")),r.a.createElement("div",null,r.a.createElement("h2",null,"\u05d4\u05e2\u05d1\u05e8\u05d4 \u05d1\u05e0\u05e7\u05d0\u05d9\u05ea"),r.a.createElement("pre",null,"\u05e0\u05d0 \u05dc\u05d4\u05e2\u05d1\u05d9\u05e8 \u05d0\u05ea \u05d4\u05ea\u05e9\u05dc\u05d5\u05dd \u05dc\u05e4\u05d9 \u05d4\u05e4\u05e8\u05d8\u05d9\u05dd \u05d4\u05d1\u05d0\u05d9\u05dd: \u05dc\u05e4\u05e7\u05d5\u05d3\u05ea: \u05d0\u05d9\u05d4 \u05d1\u05e0\u05e7: \u05e1\u05e0\u05d9\u05e3: \u05de\u05e1\u05e4\u05e8 \u05d7\u05e9\u05d1\u05d5\u05df:"))),r.a.createElement("button",{className:"btn",onClick:t},"\u05d4\u05de\u05e9\u05da"))}function Be(){return r.a.createElement("div",{className:"main-container"},r.a.createElement("h3",null,"\u05de\u05d6\u05dc \u05d8\u05d5\u05d1!"),r.a.createElement("h4",null,"\u05d4\u05d6\u05de\u05e0\u05ea\u05da \u05d4\u05d5\u05e9\u05dc\u05de\u05ea!"))}var Ve=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={currStage:0,isCustDetValidated:!1,customerDetails:{firstName:"",lastName:"",email:"",phone:null,town:"",street:""}},e.onSaveDetails=function(t){e.setState((function(e){return Object(A.a)(Object(A.a)({},e),{},{customerDetails:Object(A.a)({},t)})})),e.props.saveCustomerDetails(e.state.customerDetails),e.onNextClick()},e.onNextClick=Object(l.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!==e.state.currStage){t.next=4;break}if(console.log(e.props.supply),!De.a.isEmpty(e.props.supply)){t.next=4;break}return t.abrupt("return",alert("\u05d1\u05d1\u05e7\u05e9\u05d4 \u05d1\u05d7\u05e8\u05d5 \u05d0\u05ea \u05e9\u05d9\u05d8\u05ea \u05d4\u05de\u05e9\u05dc\u05d5\u05d7"));case 4:if(n=e.state.currStage+1,e.setState({currStage:n}),2!==e.state.currStage){t.next=16;break}return(a={}).items=e.props.cart.map((function(e){var t={};return t.itemId=e._id,t.name=e.name,t.souse=e.souse,t.quantity=e.quantity,t.measure=e.measure,t})),a.customerDetails=e.props.customerDetails,a.supply=e.props.supply,a.totalPayment=e.props.total+e.props.supply.price,a.paymentType="\u05de\u05d6\u05d5\u05de\u05df",t.next=15,e.props.saveOrder(a);case 15:e.props.emptyCart();case 16:case"end":return t.stop()}}),t)}))),e.onSaveDetails=function(t){e.setState((function(e){return Object(A.a)(Object(A.a)({},e),{},{customerDetails:Object(A.a)({},t)})})),e.props.saveCustomerDetails(e.state.customerDetails),e.onNextClick()},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.customerDetails&&this.setState({customerDetails:this.props.customerDetails})}},{key:"render",value:function(){var e;switch(this.state.currStage){case 0:return r.a.createElement($,{onNextClick:this.onNextClick});case 1:return r.a.createElement(Ge,{onSaveDetails:this.onSaveDetails,customerDetails:this.state.customerDetails,settings:this.props.settings});case 2:return r.a.createElement(Le,{onNextClick:this.onNextClick,total:this.props.total,supply:this.props.supply});case 3:return r.a.createElement(Be,null)}return r.a.createElement("div",null,e)}}]),n}(a.Component),Fe={saveCustomerDetails:function(e){return function(t){return t({type:"SAVE_CUSTOMER_DETAILS",details:e})}},loadSettings:T,saveOrder:function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ae.save(e);case 2:t.sent;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},emptyCart:U},Ye=Object(f.b)((function(e){return{customerDetails:e.userReducer.customerDetails,cart:e.userReducer.cart,total:e.userReducer.total,supply:e.userReducer.supply,settings:e.settingsReducer.settings}}),Fe)(Ve),Qe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={item:null},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadItems();case 2:t=this.props.match.params.id,n=this.props.items.find((function(e){return e._id===t})),this.setState({item:Object(A.a)({},n)});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.item;return e?r.a.createElement("div",{className:"main-container"},r.a.createElement("h2",null,e.name),r.a.createElement("img",{src:e.imgUrl,alt:"seitan-img"}),r.a.createElement(H,{item:e})):r.a.createElement("h2",null,"Loading...")}}]),n}(a.Component),He={loadItems:C},Je=Object(f.b)((function(e){return{items:e.itemReducer.items}}),He)(Qe),We=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={active:""},e.onNavBtnClicked=function(e){},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=0===this.props.total?"empty":"";return r.a.createElement("div",{className:"main-container "},r.a.createElement("div",{className:"nav-bar flex justify-between"},r.a.createElement(R.c,{className:"nav-bar-logo",to:"/",onClick:function(){return e.onNavBtnClicked()}},r.a.createElement("img",{src:n(358),alt:"logo"})),r.a.createElement("section",{className:"main-buttons flex justify-between"},r.a.createElement(R.c,{className:"nav-button",to:"/shop",onClick:function(){return e.onNavBtnClicked()}},"\u05d7\u05e0\u05d5\u05ea"),r.a.createElement(R.c,{className:"nav-button",to:"/",onClick:function(){return e.onNavBtnClicked()}},"\u05d4\u05e1\u05d9\u05e4\u05d5\u05e8 \u05e9\u05dc\u05e0\u05d5"),r.a.createElement(R.c,{className:"nav-button",to:"/",onClick:function(){return e.onNavBtnClicked()}},"\u05e2\u05dc \u05d4\u05e1\u05d9\u05d9\u05d8\u05df"," "),r.a.createElement(R.c,{className:"nav-button",to:"/",onClick:function(){return e.onNavBtnClicked()}},"\u05de\u05e9\u05dc\u05d5\u05d7\u05d9\u05dd"," ")),r.a.createElement("section",{className:"checkout"},this.props.loggedInUser&&r.a.createElement("button",{onClick:function(){return e.props.logout()}},"\u05d4\u05ea\u05e0\u05ea\u05e7\u05d9")||r.a.createElement(R.c,{to:"/checkout"},r.a.createElement("div",{className:"cart-btn ".concat(t," flex")},r.a.createElement("span",null,"\u20aa".concat(this.props.total)),r.a.createElement("img",{src:n(359),alt:""}))))))}}]),a}(a.Component),Xe={logout:M},Ke=Object(f.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser,total:e.userReducer.total}}),Xe)(We),ze=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"banner full"},this.props.settings.banner)}}]),n}(a.Component),$e=Object(f.b)((function(e){return{settings:e.settingsReducer.settings}}))(ze);function Ze(){return r.a.createElement("div",{className:"footer"},r.a.createElement("div",{className:"footer-logo"}),r.a.createElement("div",{className:"footer-contact"},r.a.createElement("h4",null,"\u05d3\u05d1\u05e8\u05d5 \u05d0\u05d9\u05ea\u05e0\u05d5"),r.a.createElement("a",{href:"tel:+9720545690088"},"054-569-0088")," ",r.a.createElement("a",{href:"mailto:ayakahila89@gmail.com"},"ayakahila89@gmail.com")),r.a.createElement("div",{className:"footer-credit"},r.a.createElement("div",null,"\u05db\u05dc \u05d4\u05d6\u05db\u05d5\u05d9\u05d5\u05ea \u05e9\u05de\u05d5\u05e8\u05d5\u05ea \xa9 2021 - \u05d3\u05e8\u05da \u05d4\u05e1\u05d9\u05d9\u05d8\u05df"),r.a.createElement("div",null,"\u05e2\u05d9\u05e6\u05d5\u05d1 \u05d5\u05d1\u05e0\u05d9\u05d9\u05ea \u05d0\u05ea\u05e8 - \u05db\u05e4\u05d9\u05e8 \u05e4\u05d5\u05e7\u05e1, \u05d0\u05dc\u05db\u05e1 \u05d2\u05d5\u05d1\u05e8\u05de\u05df, \u05dc\u05d9\u05e8\u05d5\u05df-\u05e2\u05e0\u05d1\u05dc \u05e4\u05e8\u05e1\u05d9")))}var et=function(){return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement(Ke,null),r.a.createElement($e,null)),r.a.createElement("div",{className:"App"},r.a.createElement(o.c,null,r.a.createElement(o.a,{component:be,path:"/control"}),r.a.createElement(o.a,{component:je,path:"/login"}),r.a.createElement(o.a,{component:Je,path:"/details/:id?"}),r.a.createElement(o.a,{component:Ye,path:"/checkout"}),r.a.createElement(o.a,{component:te,path:"/shop"}),r.a.createElement(o.a,{component:Ee,path:"/"}))),r.a.createElement("footer",null,r.a.createElement(Ze,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var tt=n(65),nt=n(183),at={items:[]};var rt=n(13),st=null;sessionStorage.user&&(st=JSON.parse(sessionStorage.user));var ct={loggedInUser:st,customerDetails:null,cart:[],supply:null,total:0};var ot={settings:[]};var it={orders:[]};var ut=Object(tt.c)({itemReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PRODUCTS":return Object(A.a)(Object(A.a)({},e),{},{items:t.items});default:return e}},userReducer:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_USER":return Object(A.a)(Object(A.a)({},t),{},{loggedInUser:n.user});case"ADD_TO_CART":return Object(A.a)(Object(A.a)({},t),{},{cart:[].concat(Object(rt.a)(t.cart),[n.item]),total:t.total+n.item.quantity*(n.item.price+(n.item.souse&&"\u05dc\u05dc\u05d0 \u05de\u05e8\u05d9\u05e0\u05d3\u05d4"!==(null===(e=n.item)||void 0===e?void 0:e.souse)?n.item.sousePrice:0))});case"UPDATE_QUANTITY":var a=0;return Object(A.a)(Object(A.a)({},t),{},{cart:t.cart.map((function(e){return n.item.name!==e.name||n.item.souse&&n.item.souse!==e.souse||(e.quantity+=n.item.quantity),a+=e.quantity*(e.price+(e.souse&&"\u05dc\u05dc\u05d0 \u05de\u05e8\u05d9\u05e0\u05d3\u05d4"!==e.souse?e.sousePrice:0)),e})),total:a});case"DELETE_ITEM":var r=Object(rt.a)(t.cart);return r.splice(n.idx,1),Object(A.a)(Object(A.a)({},t),{},{cart:Object(rt.a)(r),total:t.total-t.cart[n.idx].quantity*(t.cart[n.idx].price+(t.cart[n.idx].souse&&"\u05dc\u05dc\u05d0 \u05de\u05e8\u05d9\u05e0\u05d3\u05d4"!==t.cart[n.idx].souse?t.cart[n.idx].sousePrice:0))});case"EMPTY_CART":return Object(A.a)(Object(A.a)({},t),{},{cart:[],total:0});case"SAVE_CUSTOMER_DETAILS":return Object(A.a)(Object(A.a)({},t),{},{customerDetails:Object(A.a)({},n.details)});case"SAVE_SUPPLY\u05b9\u05b9\u05b9_METHOD":return Object(A.a)(Object(A.a)({},t),{},{supply:Object(A.a)({},n.supply)});default:return t}},settingsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SETTINGS":return Object(A.a)(Object(A.a)({},e),{},{settings:t.settings});default:return e}},orderReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_ORDERS":return Object(A.a)(Object(A.a)({},e),{},{orders:t.orders});case"REMOVE_ORDER":return Object(A.a)(Object(A.a)({},e),{},{orders:e.orders.filter((function(e){return e._id!==t.orderId}))});default:return e}}}),lt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||tt.d,pt=Object(tt.e)(ut,lt(Object(tt.a)(nt.a)));n(360);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(f.a,{store:pt},r.a.createElement(R.a,null,r.a.createElement(et,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[210,1,2]]]);
//# sourceMappingURL=main.d292024e.chunk.js.map